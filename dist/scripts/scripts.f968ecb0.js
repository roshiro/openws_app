"use strict";angular.module("openwsAppApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","UserApp"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl","public":!0}).when("/signup",{templateUrl:"views/signup.html",controller:"SignupCtrl","public":!0}).when("/home",{templateUrl:"views/home.html",controller:"HomeCtrl","public":!1}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl","public":!0}).otherwise({redirectTo:"/home"})}]).run(["$http","$log","$location","$rootScope","user",function(a,b,c,d,e){e.init({appId:"54707a9c6d212"}),d.wsUrl="https://openws.herokuapp.com/",d.appApiKey="b9276e788652f8287e80242dab6e5a2a";var f=["/signup","/login","/",""];""!=c.$$path&&"#/"!=c.$$path||e.status().authenticated||c.path("#/"),f.indexOf(c.$$path)>=0&&e.status().authenticated&&(b.debug("redirecting"),c.path("/home")),d.$on("$routeChangeStart",function(){""!=c.$$path&&"#/"!=c.$$path&&$("body").removeClass("wallpaper-inititalized")}),d.$on("user.login",function(){var b=d.wsUrl+"api/users/new?apiKey="+d.appApiKey,c={email:e.current.email,user_id:e.current.user_id};a.post(b,c).success(function(a){d.userJson=a,d.apiKey=a.api_key,d.$emit("apiKeyLoaded",a.api_key)})})}]),angular.module("openwsAppApp").controller("MainCtrl",["$http","$location","$log","$scope",function(a,b,c){this.usersUrl="https://openws.herokuapp.com/app.users",this.showSuccess=!1,this.showError=!1,this.user={};var d=this;this.goSignup=function(){b.path("/signup")},this.goLogin=function(){b.path("/login")},this.signup=function(b){delete b.confirmPassword,c.debug(b),this.user={},a.post(this.usersUrl,b).success(function(){d.showSuccess=!0,c.debug("User saved successfuly")}).error(function(){d.showError=!0,c.error("Use could not be saved.")})},this.validPassword=function(a){return a.password===a.confirmPassword}}]),angular.module("openwsAppApp").controller("SignupCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("openwsAppApp").controller("HomeCtrl",["$http","$rootScope",function(a,b){this.collections;var c=this;hljs.initHighlighting(),b.$on("apiKeyLoaded",function(d,e){a.get(b.wsUrl+"api/users/collections?apiKey="+e).success(function(a){c.collections=a})})}]),angular.module("openwsAppApp").controller("LoginCtrl",["$scope",function(){}]),!function(a){var b=function(b,c){this.el=a(b),this.options=a.extend({},a.fn.typed.defaults,c),this.baseText=this.el.text()||this.el.attr("placeholder")||"",this.typeSpeed=this.options.typeSpeed,this.startDelay=this.options.startDelay,this.backSpeed=this.options.backSpeed,this.backDelay=this.options.backDelay,this.strings=this.options.strings,this.strPos=0,this.arrayPos=0,this.stopNum=0,this.loop=this.options.loop,this.loopCount=this.options.loopCount,this.curLoop=0,this.stop=!1,this.showCursor=this.isInput?!1:this.options.showCursor,this.cursorChar=this.options.cursorChar,this.isInput=this.el.is("input"),this.attr=this.options.attr||(this.isInput?"placeholder":null),this.build()};b.prototype={constructor:b,init:function(){var a=this;a.timeout=setTimeout(function(){a.typewrite(a.strings[a.arrayPos],a.strPos)},a.startDelay)},build:function(){this.showCursor===!0&&(this.cursor=a('<span class="typed-cursor">'+this.cursorChar+"</span>"),this.el.after(this.cursor)),this.init()},typewrite:function(a,b){if(this.stop!==!0){var c=Math.round(70*Math.random())+this.typeSpeed,d=this;d.timeout=setTimeout(function(){var c=0,e=a.substr(b);if("^"===e.charAt(0)){var f=1;/^\^\d+/.test(e)&&(e=/\d+/.exec(e)[0],f+=e.length,c=parseInt(e)),a=a.substring(0,b)+a.substring(b+f)}d.timeout=setTimeout(function(){if(b===a.length){if(d.options.onStringTyped(d.arrayPos),d.arrayPos===d.strings.length-1&&(d.options.callback(),d.curLoop++,d.loop===!1||d.curLoop===d.loopCount))return;d.timeout=setTimeout(function(){d.backspace(a,b)},d.backDelay)}else{0===b&&d.options.preStringTyped(d.arrayPos);var c=d.baseText+a.substr(0,b+1);d.attr?d.el.attr(d.attr,c):d.el.text(c),b++,d.typewrite(a,b)}},c)},c)}},backspace:function(a,b){if(this.stop!==!0){var c=Math.round(70*Math.random())+this.backSpeed,d=this;d.timeout=setTimeout(function(){var c=d.baseText+a.substr(0,b);d.attr?d.el.attr(d.attr,c):d.el.text(c),b>d.stopNum?(b--,d.backspace(a,b)):b<=d.stopNum&&(d.arrayPos++,d.arrayPos===d.strings.length?(d.arrayPos=0,d.init()):d.typewrite(d.strings[d.arrayPos],b))},c)}},reset:function(){var a=this;clearInterval(a.timeout);var b=this.el.attr("id");this.el.after('<span id="'+b+'"/>'),this.el.remove(),this.cursor.remove(),a.options.resetCallback()}},a.fn.typed=function(c){return this.each(function(){var d=a(this),e=d.data("typed"),f="object"==typeof c&&c;e||d.data("typed",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.typed.defaults={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],typeSpeed:0,startDelay:0,backSpeed:0,backDelay:500,loop:!1,loopCount:!1,showCursor:!0,cursorChar:"|",attr:null,callback:function(){},preStringTyped:function(){},onStringTyped:function(){},resetCallback:function(){}}}(window.jQuery);